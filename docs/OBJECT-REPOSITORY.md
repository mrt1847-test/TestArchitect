# 객체 레퍼지토리 가이드

객체 레퍼지토리는 테스트에서 사용하는 웹 요소(버튼, 입력 필드 등)를 중앙에서 관리하는 기능입니다.

## 객체 레퍼지토리란?

객체 레퍼지토리는 웹 요소의 선택자(selector)를 중앙에서 관리하는 저장소입니다. 같은 요소를 여러 테스트에서 사용할 때, 선택자가 변경되어도 한 곳에서만 수정하면 모든 테스트에 반영됩니다.

### 장점

- **중앙 관리**: 모든 요소 선택자를 한 곳에서 관리
- **유지보수 용이**: 선택자 변경 시 한 곳만 수정
- **재사용성**: 여러 테스트에서 동일한 객체 재사용
- **다중 선택자 지원**: 여러 선택자를 정의하여 우선순위에 따라 사용
- **프레임워크별 최적화**: 프레임워크에 따라 최적의 선택자 자동 선택

## 객체 구조

객체는 두 가지 타입이 있습니다:

### 1. Page (페이지)
페이지는 여러 요소를 그룹화하는 컨테이너입니다.

**예제:**
- `LoginPage`: 로그인 페이지의 모든 요소를 포함
- `HomePage`: 홈 페이지의 모든 요소를 포함

### 2. Element (요소)
실제 웹 요소를 나타냅니다.

**예제:**
- `btn_Login`: 로그인 버튼
- `input_Username`: 사용자명 입력 필드
- `input_Password`: 비밀번호 입력 필드

## 선택자 타입

객체는 여러 선택자 타입을 지원합니다:

### CSS Selector
가장 일반적으로 사용되는 선택자입니다.

**예제:**
```json
{
  "type": "css",
  "value": "#login-button",
  "priority": 0
}
```

### XPath
복잡한 요소 선택에 유용합니다.

**예제:**
```json
{
  "type": "xpath",
  "value": "//button[@id='login']",
  "priority": 1
}
```

### ID
요소의 ID 속성을 사용합니다.

**예제:**
```json
{
  "type": "id",
  "value": "login-button",
  "priority": 0
}
```

### Class
요소의 클래스 속성을 사용합니다.

**예제:**
```json
{
  "type": "class",
  "value": "btn-primary",
  "priority": 1
}
```

### Name
요소의 name 속성을 사용합니다.

**예제:**
```json
{
  "type": "name",
  "value": "username",
  "priority": 0
}
```

## 우선순위

객체는 여러 선택자를 가질 수 있으며, 우선순위(priority)에 따라 사용됩니다. 우선순위가 낮을수록 먼저 사용됩니다.

**예제:**
```json
[
  {
    "type": "id",
    "value": "login-button",
    "priority": 0
  },
  {
    "type": "css",
    "value": "button.btn-primary",
    "priority": 1
  },
  {
    "type": "xpath",
    "value": "//button[contains(@class, 'btn-primary')]",
    "priority": 2
  }
]
```

이 경우, ID 선택자가 먼저 시도되고, 실패하면 CSS 선택자, 그 다음 XPath 선택자가 사용됩니다.

## 객체 생성

### 1. 프로젝트 선택
좌측 사이드바에서 프로젝트를 선택합니다.

### 2. 객체 섹션 열기
"Objects" 섹션을 클릭하여 확장합니다.

### 3. 새 객체 생성
- 페이지 생성: "새 페이지" 버튼 클릭
- 요소 생성: 페이지를 선택한 후 "새 요소" 버튼 클릭

### 4. 객체 정보 입력
- **이름**: 객체의 이름 (예: `btn_Login`)
- **설명**: 객체에 대한 설명 (선택사항)
- **타입**: Page 또는 Element
- **선택자**: 하나 이상의 선택자 추가

### 5. 선택자 추가
각 선택자는 다음 정보를 포함합니다:
- **타입**: CSS, XPath, ID, Class, Name 등
- **값**: 선택자 값
- **우선순위**: 숫자 (낮을수록 우선)

## 객체 사용

### 키워드 뷰에서 사용

키워드 뷰의 `target` 필드에 객체 이름을 입력하면 자동으로 최적의 선택자가 사용됩니다.

**예제:**
```
Action: click
Target: btn_Login  (객체 레퍼지토리의 객체 이름)
```

### 코드에서 사용

객체 레퍼지토리의 객체는 자동으로 선택자로 변환됩니다.

**생성된 코드:**
```python
# btn_Login 객체가 #login-button을 가진 경우
page.click("#login-button")
```

## 프레임워크별 최적 선택자

객체 레퍼지토리는 프레임워크에 따라 최적의 선택자를 자동으로 선택합니다.

### Playwright
Playwright는 CSS 선택자를 선호합니다.

**우선순위:**
1. CSS Selector
2. XPath
3. ID

### Selenium
Selenium은 ID 선택자를 선호합니다.

**우선순위:**
1. ID
2. CSS Selector
3. XPath

## 객체 관리

### 객체 수정
1. 객체를 선택합니다.
2. 우클릭하여 "편집"을 선택합니다.
3. 정보를 수정합니다.
4. "저장"을 클릭합니다.

### 객체 삭제
1. 객체를 선택합니다.
2. 우클릭하여 "삭제"를 선택합니다.
3. 확인 대화상자에서 "확인"을 클릭합니다.

### 객체 복제
1. 객체를 선택합니다.
2. 우클릭하여 "복제"를 선택합니다.
3. 이름을 수정합니다.
4. "저장"을 클릭합니다.

## 네이밍 규칙

객체 이름은 일관성 있게 명명하는 것이 좋습니다.

### 권장 네이밍 규칙

- **버튼**: `btn_` 접두사 사용 (예: `btn_Login`, `btn_Submit`)
- **입력 필드**: `input_` 접두사 사용 (예: `input_Username`, `input_Password`)
- **링크**: `link_` 접두사 사용 (예: `link_Home`, `link_About`)
- **텍스트**: `text_` 접두사 사용 (예: `text_Welcome`, `text_Error`)
- **이미지**: `img_` 접두사 사용 (예: `img_Logo`, `img_Banner`)
- **드롭다운**: `select_` 접두사 사용 (예: `select_Country`, `select_Language`)

### 페이지 네이밍

- 페이지 이름은 명확하게 (예: `LoginPage`, `HomePage`, `ProductPage`)

## 모범 사례

1. **명확한 이름 사용**: 객체 이름은 용도를 명확히 나타내야 합니다.
2. **다중 선택자 제공**: 가능하면 여러 선택자를 제공하여 안정성을 높입니다.
3. **우선순위 설정**: 가장 안정적인 선택자에 낮은 우선순위를 부여합니다.
4. **페이지별 그룹화**: 관련된 요소들을 같은 페이지 아래에 그룹화합니다.
5. **정기적인 검토**: 선택자가 여전히 유효한지 정기적으로 확인합니다.

## 객체 레퍼지토리와 키워드의 통합

객체 레퍼지토리와 키워드 방식을 함께 사용하면 더욱 강력한 테스트 자동화가 가능합니다.

**예제 테스트 케이스:**
```
1. open - https://example.com
2. click - btn_Login
3. type - input_Username - admin
4. type - input_Password - password123
5. click - btn_Submit
6. verifyElementPresent - text_Welcome
```

이렇게 작성하면 선택자가 변경되어도 객체 레퍼지토리에서만 수정하면 모든 테스트에 반영됩니다.


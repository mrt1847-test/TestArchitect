<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="../../record/style.css">
<link rel="stylesheet" href="lib/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="lib/codemirror/theme/neo.css">
<link rel="stylesheet" href="styles.css">
<style>
  /* VS Code í…Œë§ˆ ë³€ìˆ˜ ì ìš© */
  :root {
    --vscode-bg: #1e1e1e;
    --vscode-sidebar: #252526;
    --vscode-activity-bar: #2d2d30;
    --vscode-title-bar: #3c3c3c;
    --vscode-tab-bg: #1e1e1e;
    --vscode-tab-active: #2d2d30;
    --vscode-tab-border: #007acc;
    --vscode-border: #3e3e42;
    --vscode-text: #cccccc;
    --vscode-text-secondary: #858585;
    --vscode-hover: #2a2d2e;
    --vscode-selection: #264f78;
    --vscode-primary: #007acc;
    --vscode-primary-hover: #1a8cd8;
    --vscode-input-bg: #3c3c3c;
    --vscode-input-border: #454545;
  }

  body {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background: var(--vscode-bg);
    color: var(--vscode-text);
    font-family: Inter, Arial, Helvetica, sans-serif;
    height: 100%; /* 100vh ëŒ€ì‹  100%ë¡œ ë³€ê²½í•˜ì—¬ iframe ë†’ì´ì— ë§ì¶¤ */
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  
  html {
    height: 100%;
    overflow: hidden;
    background: var(--vscode-bg);
  }
  
  #main {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    gap: 11.2px; /* 16px * 0.7 */
    align-items: stretch;
    padding: 8.4px; /* 12px * 0.7 */
    min-height: 0;
    -webkit-overflow-scrolling: touch; /* iOS ìŠ¤í¬ë¡¤ ê°œì„  */
  }

  /* VS Code ë‹¤í¬ í…Œë§ˆ ì˜¤ë²„ë¼ì´ë“œ */
  body {
    background: var(--vscode-bg) !important;
    color: var(--vscode-text) !important;
  }

  /* Recorder Header ìŠ¤íƒ€ì¼ */
  .recorder-header {
    background: var(--vscode-sidebar) !important;
    border: 1px solid var(--vscode-border) !important;
    border-radius: 5.6px; /* 8px * 0.7 */
    padding: 8.4px 11.2px; /* 12px 16px * 0.7 */
    margin-bottom: 8.4px; /* 12px * 0.7 */
  }

  .recorder-header-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8.4px; /* 12px * 0.7 */
  }

  .recorder-controls {
    display: flex;
    gap: 5.6px; /* 8px * 0.7 */
    align-items: center;
  }

  .recorder-btn {
    display: inline-flex;
    align-items: center;
    gap: 5.6px; /* 8px * 0.7 */
    padding: 7px 12.6px; /* 10px 18px * 0.7 */
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    cursor: pointer;
    font-size: 9.8px; /* 14px * 0.7 */
    font-weight: 500;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .recorder-btn:hover:not(:disabled) {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  .recorder-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .recorder-btn-primary {
    background: var(--vscode-primary);
    color: white;
    border-color: var(--vscode-primary);
  }

  .recorder-btn-primary:hover:not(:disabled) {
    background: var(--vscode-primary-hover);
    border-color: var(--vscode-primary-hover);
  }

  .recorder-btn-icon {
    font-size: 7px; /* 10px * 0.7 */
    line-height: 1;
  }

  .recorder-btn-icon-only {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22.4px; /* 32px * 0.7 */
    height: 22.4px; /* 32px * 0.7 */
    padding: 0;
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    cursor: pointer;
    font-size: 11.2px; /* 16px * 0.7 */
    transition: all 0.2s ease;
  }

  .recorder-btn-icon-only:hover {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  /* Settings Panel */
  .settings-panel {
    background: var(--vscode-sidebar);
    border-top: 1px solid var(--vscode-border);
    padding: 14px; /* 20px * 0.7 */
    margin-top: 8.4px; /* 12px * 0.7 */
    border-radius: 0 0 5.6px 5.6px; /* 8px * 0.7 */
    max-height: 60vh; /* ìµœëŒ€ ë†’ì´ ì œí•œ */
    overflow-y: auto; /* ìŠ¤í¬ë¡¤ ì¶”ê°€ */
    overflow-x: hidden;
  }

  .settings-panel.hidden {
    display: none;
  }

  .settings-content {
    display: flex;
    flex-direction: column;
    gap: 16.8px; /* 24px * 0.7 */
  }

  .settings-section h5 {
    margin: 0 0 8.4px 0; /* 12px * 0.7 */
    font-size: 9.1px; /* 13px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
  }

  .settings-row {
    display: flex;
    gap: 11.2px; /* 16px * 0.7 */
    flex-wrap: wrap;
    align-items: flex-end;
  }

  .settings-field {
    display: flex;
    flex-direction: column;
    gap: 5.6px; /* 8px * 0.7 */
    flex: 1 1 200px;
    min-width: 150px;
  }

  .settings-label {
    font-size: 8.4px; /* 12px * 0.7 */
    font-weight: 500;
    color: var(--vscode-text-secondary);
  }

  .settings-field input,
  .settings-field select {
    padding: 7px 9.8px; /* 10px 14px * 0.7 */
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    font-size: 9.8px; /* 14px * 0.7 */
    transition: border-color 0.2s ease;
  }

  .settings-field input:focus,
  .settings-field select:focus {
    outline: none;
    border-color: var(--vscode-primary);
    box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.1);
  }

  /* Steps Panel */
  #steps-panel {
    background: var(--vscode-sidebar);
    border-radius: 5.6px; /* 8px * 0.7 */
    border: 1px solid var(--vscode-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin-bottom: 11.2px; /* 16px * 0.7 */
    flex: 0 0 auto; /* ê³ ì • í¬ê¸°, ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
    min-height: 300px; /* ìµœì†Œ ë†’ì´ ì¦ê°€ */
    max-height: 60vh; /* ìµœëŒ€ ë†’ì´ */
    height: 300px; /* ê³ ì • ë†’ì´ ì„¤ì • */
  }

  .steps-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 9.8px 12.6px; /* 14px 18px * 0.7 */
    border-bottom: 1px solid var(--vscode-border);
    background: var(--vscode-title-bar);
  }

  .steps-header h4 {
    margin: 0;
    font-size: 9.8px; /* 14px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
  }

  .steps-header-actions {
    display: flex;
    gap: 5.6px; /* 8px * 0.7 */
  }

  .step-action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 19.6px; /* 28px * 0.7 */
    height: 19.6px; /* 28px * 0.7 */
    padding: 0;
    border-radius: 2.8px; /* 4px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    cursor: pointer;
    font-size: 9.8px; /* 14px * 0.7 */
    transition: all 0.2s ease;
  }

  .step-action-btn:hover:not(:disabled) {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  .step-action-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }

  .steps-list {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 8.4px; /* 12px * 0.7 */
    min-height: 0; /* flex: 1ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ë„ë¡ */
    display: flex;
    flex-direction: column;
    gap: 5.6px; /* 8px * 0.7 */
  }

  .steps-empty {
    padding: 28px 14px; /* 40px 20px * 0.7 */
    text-align: center;
    color: var(--vscode-text-secondary);
    font-size: 9.1px; /* 13px * 0.7 */
  }

  .steps-empty.hidden {
    display: none !important;
  }
  
  /* steps-panelì— ì•„ì´í…œì´ ìˆì„ ë•Œ steps-empty ìˆ¨ê¸°ê¸° */
  #steps-panel:has(.recorder-step) .steps-empty {
    display: none !important;
  }

  /* Recorder Step */
  .recorder-step {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 0;
    padding: 5.88px 9.8px; /* 8.4px * 0.7 = 5.88px (ë†’ì´ 70%) */
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-border);
    background: var(--vscode-input-bg);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    min-height: 33.6px; /* 8.4px * 4 = 33.6px (ìµœì†Œ ë†’ì´ 4ë°°) */
    flex-shrink: 0; /* ì´ë²¤íŠ¸ê°€ ë§ì•„ì ¸ë„ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
  }

  .recorder-step:hover {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  .recorder-step.selected {
    background: var(--vscode-selection);
    border-color: var(--vscode-primary);
    box-shadow: 0 0 0 1px var(--vscode-primary);
  }

  .recorder-step-main {
    display: flex;
    align-items: center;
    gap: 6px; /* ê°„ê²© ì¤„ì„ */
    width: 100%;
    min-height: 28px; /* ìµœì†Œ ë†’ì´ ë³´ì¥ */
  }

  .recorder-step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16.8px; /* 24px * 0.7 */
    height: 16.8px; /* 24px * 0.7 */
    border-radius: 2.8px; /* 4px * 0.7 */
    background: var(--vscode-title-bar);
    color: var(--vscode-text-secondary);
    font-size: 7.7px; /* 11px * 0.7 */
    font-weight: 600;
    flex-shrink: 0;
  }

  .recorder-step.selected .recorder-step-number {
    background: var(--vscode-primary);
    color: white;
  }

  .recorder-step-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 14px; /* 20px * 0.7 */
    height: 14px; /* 20px * 0.7 */
    flex-shrink: 0;
    font-size: 9.8px; /* 14px * 0.7 */
  }

  .recorder-step-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px; /* ê°„ê²© ì¤„ì„ */
    justify-content: center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
  }

  .recorder-step-action {
    display: flex;
    align-items: center;
    gap: 5.6px; /* 8px * 0.7 */
    font-size: 12px; /* ì´ë²¤íŠ¸ê°€ ë§ì•„ì ¸ë„ ì½ì„ ìˆ˜ ìˆë„ë¡ ì ì ˆí•œ í¬ê¸° */
    font-weight: 500;
    color: var(--vscode-text);
  }

  .recorder-step-target {
    font-size: 11px; /* ì ì ˆí•œ í¬ê¸°ë¡œ ì¡°ì • */
    color: var(--vscode-text-secondary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: "Courier New", monospace;
  }

  .recorder-step-selector {
    font-size: 10px; /* ì ì ˆí•œ í¬ê¸°ë¡œ ì¡°ì • */
    color: var(--vscode-text-secondary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: "Courier New", monospace;
  }

  .recorder-step-actions {
    display: flex;
    gap: 4px;
    opacity: 0;
    transition: opacity 0.2s ease;
    flex-shrink: 0;
  }

  .recorder-step:hover .recorder-step-actions {
    opacity: 1;
  }

  .recorder-step-expand,
  .recorder-step-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16.8px; /* 24px * 0.7 */
    height: 16.8px; /* 24px * 0.7 */
    padding: 0;
    border-radius: 2.8px; /* 4px * 0.7 */
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 7px; /* 10px * 0.7 */
    transition: all 0.2s ease;
    color: var(--vscode-text-secondary);
    flex-shrink: 0;
  }

  .recorder-step-expand:hover,
  .recorder-step-btn:hover {
    background: var(--vscode-hover);
    color: var(--vscode-text);
  }

  .recorder-step-details {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    padding: 0 8.4px; /* 12px * 0.7 */
    background: var(--vscode-title-bar);
    border-top: 1px solid var(--vscode-border);
    margin-top: 5.6px; /* 8px * 0.7 */
  }

  .recorder-step.expanded .recorder-step-details {
    max-height: 5000px; /* ì¶©ë¶„íˆ í° ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ëª¨ë“  ë‚´ìš©ì´ ë³´ì´ë„ë¡ */
    padding: 8.4px; /* 12px * 0.7 */
    border-radius: 2.8px; /* 4px * 0.7 */
    overflow-y: auto; /* ë‚´ìš©ì´ ë§ì„ ê²½ìš° ìŠ¤í¬ë¡¤ ê°€ëŠ¥ */
  }

  /* Step Details Panel */
  .step-details-panel {
    background: var(--vscode-sidebar);
    border-radius: 5.6px; /* 8px * 0.7 */
    border: 1px solid var(--vscode-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin-bottom: 8.4px; /* 12px * 0.7 */
    flex: 0 0 auto; /* ê³ ì • í¬ê¸°, ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
    min-height: 200px; /* ì ‘ì§€ ì•Šì•˜ì„ ë•Œ ìµœì†Œ ë†’ì´ ë³´ì¥ */
    max-height: 40vh;
  }

  .step-details-panel.hidden {
    display: none;
    min-height: 0;
  }

  .step-details-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8.4px 11.2px; /* 12px 16px * 0.7 */
    border-bottom: 1px solid var(--vscode-border);
    background: var(--vscode-title-bar);
  }

  .step-details-header h4 {
    margin: 0;
    font-size: 10.5px; /* 15px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
  }

  .step-details-close {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16.8px; /* 24px * 0.7 */
    height: 16.8px; /* 24px * 0.7 */
    padding: 0;
    border-radius: 2.8px; /* 4px * 0.7 */
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 11.2px; /* 16px * 0.7 */
    color: var(--vscode-text-secondary);
    transition: all 0.2s ease;
  }

  .step-details-close:hover {
    background: var(--vscode-hover);
    color: var(--vscode-text);
  }

  #step-details-content {
    padding: 12.6px; /* 18px * 0.7 */
    overflow-y: auto;
    max-height: 400px;
    flex: 1;
    min-height: 0; /* flex ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í¬ë¡¤ì´ ì‘ë™í•˜ë„ë¡ */
    font-size: 8.4px; /* 12px * 0.7 - Step Details ì˜ì—­ ê¸°ë³¸ í°íŠ¸ í¬ê¸° */
  }

  /* Code Area */
  .code-area {
    background: #2d2d2d !important; /* ì–´ë‘ìš´ íšŒìƒ‰ - ê°•ì œ ì ìš© */
    border-radius: 5.6px; /* 8px * 0.7 */
    border: 1px solid var(--vscode-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin-bottom: 8.4px; /* 12px * 0.7 */
    flex: 0 0 auto; /* ê³ ì • í¬ê¸°, ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
    min-height: 200px; /* ì ‘ì§€ ì•Šì•˜ì„ ë•Œ ìµœì†Œ ë†’ì´ ë³´ì¥ */
    transition: max-height 0.3s ease;
  }
  
  /* ì ‘í˜”ì„ ë•ŒëŠ” ìµœì†Œ ë†’ì´ ì œê±° */
  .code-area.collapsed {
    min-height: 0;
  }

  .code-area.collapsed .code-area-header {
    border-bottom: none; /* ì ‘í˜”ì„ ë•Œ í•˜ë‹¨ border ì œê±° */
  }

  .code-area.collapsed .code-area-content {
    display: none; /* ë‚´ìš©ë§Œ ìˆ¨ê¹€ */
  }

  .code-area-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 10px; /* íƒ€ì´í‹€ ì˜ì—­ í¬ê¸° ì¤„ì„ */
    border-bottom: 1px solid var(--vscode-border);
    background: #1e1e1e; /* ë‹¤í¬ íŒ¨í„´ ì ìš© */
    min-height: 28px;
    cursor: pointer; /* í—¤ë” í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ */
    user-select: none; /* í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
  }

  .code-area-header:hover {
    background: #252526; /* í˜¸ë²„ ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½ */
  }

  .code-area-header h4 {
    margin: 0;
    font-size: 11px; /* íƒ€ì´í‹€ í°íŠ¸ í¬ê¸° */
    font-weight: 600;
    color: var(--vscode-text);
  }

  .code-area-header-actions {
    display: flex;
    align-items: center;
    gap: 6px; /* í¬ê¸° ì¤„ì„ */
    font-size: 10px; /* ì‘ê²Œ */
  }

  .code-area-header-actions .recorder-btn {
    padding: 4px 8px; /* ì‘ê²Œ */
    font-size: 9px; /* ì‘ê²Œ */
  }

  .ai-review-help {
    font-size: 10px; /* ì‘ê²Œ */
    width: 16px;
    height: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .code-review-status {
    font-size: 9px; /* ì‘ê²Œ */
  }

  .code-area-toggle,
  .replay-log-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16.8px; /* 24px * 0.7 */
    height: 16.8px; /* 24px * 0.7 */
    padding: 0;
    border-radius: 2.8px; /* 4px * 0.7 */
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 8.4px; /* 12px * 0.7 */
    color: var(--vscode-text-secondary);
    transition: all 0.2s ease;
  }

  .code-area-toggle:hover,
  .replay-log-toggle:hover {
    background: var(--vscode-hover);
    color: var(--vscode-text);
  }

  .code-area-toggle.collapsed,
  .replay-log-toggle.collapsed {
    transform: rotate(-90deg);
  }

  .code-area-content {
    padding: 8px;
    background: #1e1e1e !important; /* ë‹¤í¬ íŒ¨í„´ ì ìš© */
    transition: max-height 0.3s ease;
    flex: 1;
    overflow-y: auto;
    min-height: 0; /* flex ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í¬ë¡¤ì´ ì‘ë™í•˜ë„ë¡ */
  }

  .code-area-content,
  .replay-log-content {
    transition: max-height 0.3s ease;
  }

  .code-area.collapsed .code-area-content {
    display: none;
  }

  .code-area-content.collapsed,
  .replay-log-content.collapsed {
    max-height: 0;
    overflow: hidden;
  }

  #code-editor {
    border: 1px solid var(--vscode-border);
    border-radius: 6px;
    background: #1e1e1e !important; /* ë‹¤í¬ íŒ¨í„´ ì ìš© */
    flex: 1 1 auto;
    display: flex;
    min-height: 150px; /* ì½”ë“œ ì—ë””í„° ìµœì†Œ ë†’ì´ ë³´ì¥ */
  }

  #code-output {
    background: #1e1e1e !important;
    color: #d4d4d4 !important;
    border: none !important;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace !important;
    font-size: 11px !important;
    line-height: 1.4 !important;
    width: 100%;
    height: 100%;
    resize: none;
    padding: 8px;
    box-sizing: border-box;
  }

  #code-editor .CodeMirror {
    flex: 1 1 auto;
    height: 100% !important;
    background: #1e1e1e !important; /* ë‹¤í¬ íŒ¨í„´ ì ìš© */
    color: #d4d4d4 !important;
    font-size: 11px !important; /* ì½”ë“œ ì—ë””í„° í°íŠ¸ ì‘ê²Œ */
    line-height: 1.4 !important;
  }

  #code-editor .CodeMirror-scroll {
    font-size: 11px !important;
    background: #1e1e1e !important;
  }

  #code-editor .CodeMirror-lines {
    font-size: 11px !important;
    background: #1e1e1e !important;
  }

  #code-editor .CodeMirror-code {
    font-size: 11px !important;
    background: #1e1e1e !important;
  }

  #code-editor .CodeMirror-gutters {
    background: #252526 !important; /* ë‹¤í¬ íŒ¨í„´ ì ìš© */
    border-right-color: var(--vscode-border) !important;
  }

  #code-editor .CodeMirror-linenumber {
    color: #858585 !important;
    font-size: 11px !important;
  }

  #code-editor .CodeMirror-cursor {
    border-left: 1px solid #aeafad !important;
  }

  #code-editor .CodeMirror-selected {
    background: #264f78 !important; /* ì„ íƒ ì˜ì—­ ë‹¤í¬ íŒ¨í„´ */
  }

  /* CodeMirror ì „ì²´ ë°°ê²½ ë‹¤í¬ íŒ¨í„´ ê°•ì œ ì ìš© */
  #code-editor .CodeMirror,
  #code-editor .CodeMirror-scroll,
  #code-editor .CodeMirror-sizer,
  #code-editor .CodeMirror-lines,
  #code-editor .CodeMirror-code,
  #code-editor .CodeMirror-line,
  #code-editor .CodeMirror-wrap,
  #code-editor .CodeMirror-focused {
    background: #1e1e1e !important;
    color: #d4d4d4 !important;
  }
  
  /* CodeMirror í¸ì§‘ ì˜ì—­ ë°°ê²½ ê°•ì œ */
  #code-editor .CodeMirror .CodeMirror-code > div {
    background: #1e1e1e !important;
  }
  
  /* code-area ì „ì²´ ë°°ê²½ ë³´ì¥ */
  .code-area,
  .code-area-content,
  #code-editor {
    background: #2d2d2d !important;
  }

  /* Replay Log */
  .replay-log {
    background: var(--vscode-sidebar);
    border-radius: 5.6px; /* 8px * 0.7 */
    border: 1px solid var(--vscode-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin-bottom: 8.4px; /* 12px * 0.7 */
    flex: 0 0 auto; /* ê³ ì • í¬ê¸°, ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ */
    min-height: 150px; /* ì ‘ì§€ ì•Šì•˜ì„ ë•Œ ìµœì†Œ ë†’ì´ ë³´ì¥ */
  }
  
  /* ì ‘í˜”ì„ ë•ŒëŠ” ìµœì†Œ ë†’ì´ ì œê±° */
  .replay-log.collapsed {
    min-height: 0;
  }

  .replay-log-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 9.8px 12.6px; /* 14px 18px * 0.7 */
    border-bottom: 1px solid var(--vscode-border);
    background: var(--vscode-title-bar);
    cursor: pointer;
    user-select: none; /* í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
  }

  .replay-log-header:hover {
    background: var(--vscode-hover); /* í˜¸ë²„ ì‹œ ë°°ê²½ìƒ‰ ë³€ê²½ */
  }

  .replay-log.collapsed .replay-log-header {
    border-bottom: none; /* ì ‘í˜”ì„ ë•Œ í•˜ë‹¨ border ì œê±° */
  }

  .replay-log-header h4 {
    margin: 0;
    font-size: 10.5px; /* 15px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
  }

  .replay-log-content {
    padding: 9.8px 12.6px; /* 14px 18px * 0.7 */
    max-height: 300px;
    overflow-y: auto;
    flex: 1;
    min-height: 0; /* flex ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í¬ë¡¤ì´ ì‘ë™í•˜ë„ë¡ */
  }

  #log-entries {
    background: var(--vscode-input-bg);
    border-color: var(--vscode-border);
    color: var(--vscode-text);
    border-radius: 2.8px; /* 4px * 0.7 */
    padding: 5.6px; /* 8px * 0.7 */
    font-size: 8.4px; /* 12px * 0.7 */
  }

  .log-entry {
    color: var(--vscode-text);
    padding: 2.8px 0; /* 4px * 0.7 */
  }

  .log-entry.log-info {
    color: var(--vscode-primary);
  }

  .log-entry.log-success {
    color: #4ec9b0;
  }

  .log-entry.log-error {
    color: #f48771;
  }

  /* Selector Panel */
  #selector-panel {
    background: var(--vscode-sidebar);
    border-radius: 8px;
    padding: 8px;
    border: 1px solid var(--vscode-border);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  #selector-panel h4 {
    margin: 0 0 5.6px 0; /* 8px * 0.7 */
    font-size: 10.5px; /* 15px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
  }

  #selector-list {
    flex: 1 1 auto;
    overflow-y: auto;
    min-height: 0;
  }

  /* Element Panel */
  #element-panel {
    background: var(--vscode-sidebar);
    border-color: var(--vscode-border);
  }

  #element-panel.hidden {
    display: none;
  }

  .element-header h4 {
    color: var(--vscode-text);
  }

  #element-cancel-btn {
    background: var(--vscode-input-bg);
    border-color: var(--vscode-border);
    color: var(--vscode-text);
  }

  #element-cancel-btn:hover {
    background: var(--vscode-hover);
  }

  /* Global Assertion Section */
  .global-assertion-section {
    padding: 12px;
    border-top: 1px solid var(--vscode-border);
    background: var(--vscode-title-bar);
  }

  .global-add-assertion-btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px; /* ì ì ˆí•œ ê°„ê²© */
    padding: 4px 6px; /* ë²„íŠ¼ í¬ê¸°ëŠ” ì‘ê²Œ ìœ ì§€ */
    border-radius: 3px;
    border: 1px solid var(--vscode-primary);
    background: var(--vscode-input-bg);
    color: var(--vscode-primary);
    font-size: 10px; /* í°íŠ¸ëŠ” ì½ì„ ìˆ˜ ìˆë„ë¡ ì ì ˆí•œ í¬ê¸° */
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    line-height: 1.3;
  }

  .global-add-assertion-btn:hover {
    background: var(--vscode-selection);
    border-color: var(--vscode-primary-hover);
  }

  .global-add-assertion-btn span:first-child {
    font-size: 12px; /* ì ì ˆí•œ í¬ê¸°ë¡œ ì¡°ì • */
    font-weight: bold;
    line-height: 1;
  }

  .global-assertion-menu {
    position: relative;
    margin-top: 8px;
    padding: 12px;
    background: var(--vscode-sidebar);
    border-radius: 6px;
    border: 1px solid var(--vscode-border);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .global-assertion-menu.hidden {
    display: none;
  }

  .global-assertion-menu .assertion-menu-header {
    font-size: 12px;
    font-weight: 600;
    color: var(--vscode-text);
    margin-bottom: 8px;
  }

  .assertion-menu-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .assertion-menu-btn {
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    flex: 1 1 auto;
    min-width: 120px;
  }

  .assertion-menu-btn:hover {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  /* Action Menu */
  .action-menu-wrapper {
    position: relative;
    display: inline-block;
  }

  .action-menu {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 4px;
    background: var(--vscode-sidebar);
    border: 1px solid var(--vscode-border);
    border-radius: 10px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    min-width: 220px;
    max-height: 400px;
    overflow-y: auto;
  }

  .action-menu.hidden {
    display: none;
  }

  .action-menu-category {
    padding: 4px 0;
    border-bottom: 1px solid var(--vscode-border);
  }

  .action-menu-category:last-child {
    border-bottom: none;
  }

  .action-menu-header {
    padding: 8px 12px;
    font-weight: 600;
    font-size: 11px;
    color: var(--vscode-text-secondary);
    text-transform: uppercase;
    background: var(--vscode-title-bar);
    letter-spacing: 0.5px;
  }

  .action-menu button {
    display: block;
    width: 100%;
    padding: 10px 12px;
    text-align: left;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.15s ease;
    color: var(--vscode-text);
  }

  .action-menu button:hover {
    background: var(--vscode-hover);
  }

  /* Selector Tab */
  .selector-tab-header {
    display: flex;
    gap: 4px;
    margin: 12px 0 8px;
  }

  .selector-tab-button {
    flex: 1 1 0%;
    padding: 6px 10px;
    border: 1px solid var(--vscode-input-border);
    border-radius: 6px;
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .selector-tab-button:hover:not(:disabled) {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  .selector-tab-button.active {
    background: var(--vscode-primary);
    color: white;
    border-color: var(--vscode-primary);
  }

  .selector-tab-button:disabled {
    opacity: 0.4;
    cursor: default;
  }

  .selector-tab-content {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .selector-item {
    background: var(--vscode-input-bg);
    border-color: var(--vscode-border);
    color: var(--vscode-text);
    padding: 4.2px; /* 6px * 0.7 */
    border-bottom: 1px solid var(--vscode-border);
    display: flex;
    flex-direction: column;
    gap: 2.8px; /* 4px * 0.7 */
  }

  .selector-item .selector-main {
    display: flex;
    align-items: center;
    gap: 4.2px; /* 6px * 0.7 */
    flex-wrap: wrap;
  }

  .selector-item .selector-main .type {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 1.4px 4.2px; /* 2px 6px * 0.7 */
    border-radius: 2.8px; /* 4px * 0.7 */
    background: rgba(0, 122, 204, 0.2);
    color: var(--vscode-primary);
    font-size: 7px; /* 10px * 0.7 */
    font-weight: 600;
  }

  .selector-item .selector-main .sel {
    font-family: "Courier New", monospace;
    font-size: 8.4px; /* 12px * 0.7 */
    color: var(--vscode-text);
    flex: 1 1 auto;
    min-width: 0;
    word-break: break-word;
  }

  .selector-item .selector-main .score {
    margin-left: auto;
    font-size: 7.7px; /* 11px * 0.7 */
    color: var(--vscode-text-secondary);
  }

  .selector-empty {
    padding: 8.4px; /* 12px * 0.7 */
    color: var(--vscode-text-secondary);
    font-size: 8.4px; /* 12px * 0.7 */
    text-align: center;
    border: 1px dashed var(--vscode-border);
    border-radius: 5.6px; /* 8px * 0.7 */
    background: var(--vscode-input-bg);
  }

  #iframe-banner {
    background: rgba(248, 113, 113, 0.15);
    border-color: #f48771;
    color: #f48771;
    padding: 5.6px; /* 8px * 0.7 */
    border-radius: 4.2px; /* 6px * 0.7 */
    margin-bottom: 5.6px; /* 8px * 0.7 */
    font-size: 8.4px; /* 12px * 0.7 */
  }

  #iframe-banner.hidden {
    display: none;
  }

  .hidden {
    display: none;
  }

  /* AI Settings Status */
  .ai-settings-status {
    font-size: 11px;
    color: var(--vscode-text-secondary);
    min-height: 14px;
  }

  .ai-settings-status.error {
    color: #f48771;
  }

  .ai-settings-status.pending {
    color: var(--vscode-primary);
  }

  .ai-settings-status.success {
    color: #4ec9b0;
  }

  /* Code Review */
  .code-review-controls {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .code-review-status {
    font-size: 11px;
    color: var(--vscode-text-secondary);
  }

  .code-review-status.info {
    color: var(--vscode-primary);
  }

  .code-review-status.success {
    color: #4ec9b0;
  }

  .code-review-status.error {
    color: #f48771;
  }

  .code-review-summary {
    font-size: 12px;
    line-height: 1.5;
    color: var(--vscode-text);
    background: var(--vscode-input-bg);
    border: 1px solid var(--vscode-border);
    border-radius: 8px;
    padding: 10px;
  }

  .code-review-diff {
    max-height: 220px;
    overflow: auto;
    border: 1px solid var(--vscode-border);
    border-radius: 8px;
    background: #0f172a;
    padding: 10px;
    font-family: "Fira Code", Consolas, "Courier New", monospace;
    font-size: 12px;
    color: #e2e8f0;
  }

  /* Element Panel Styles */
  .element-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .element-section.hidden {
    display: none;
  }

  .element-title {
    font-size: 8.4px; /* 12px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text-secondary);
  }

  #element-candidates {
    border: 1px solid var(--vscode-border);
    border-radius: 6px;
    max-height: 220px;
    overflow-y: auto;
    background: var(--vscode-input-bg);
  }

  .element-action-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .element-action-buttons button {
    padding: 4.2px 7px; /* 6px 10px * 0.7 */
    border-radius: 2.8px; /* 4px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    cursor: pointer;
    font-size: 8.4px; /* 12px * 0.7 */
    transition: all 0.2s ease;
  }

  .element-action-buttons button:hover {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  #element-attribute-panel input,
  #wait-time-input {
    flex: 1;
    padding: 4.2px 5.6px; /* 6px 8px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    border-radius: 2.8px; /* 4px * 0.7 */
    font-size: 8.4px; /* 12px * 0.7 */
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
  }

  .element-attr-row {
    display: flex;
    gap: 4.2px; /* 6px * 0.7 */
  }

  #element-attr-apply,
  #wait-time-apply {
    padding: 4.2px 8.4px; /* 6px 12px * 0.7 */
    border-radius: 2.8px; /* 4px * 0.7 */
    border: 1px solid var(--vscode-primary);
    background: var(--vscode-primary);
    color: white;
    cursor: pointer;
    font-size: 8.4px; /* 12px * 0.7 */
  }

  #element-attr-apply:hover,
  #wait-time-apply:hover {
    background: var(--vscode-primary-hover);
  }

  #element-code-preview pre {
    margin: 0;
    background: var(--vscode-bg);
    color: var(--vscode-text);
    padding: 7px; /* 10px * 0.7 */
    border-radius: 4.2px; /* 6px * 0.7 */
    font-size: 8.4px; /* 12px * 0.7 */
    max-height: 112px; /* 160px * 0.7 */
    overflow: auto;
    border: 1px solid var(--vscode-border);
  }

  #element-status {
    display: none;
    font-size: 8.4px; /* 12px * 0.7 */
    color: var(--vscode-text);
    background: var(--vscode-input-bg);
    border: 1px dashed var(--vscode-border);
    border-radius: 4.2px; /* 6px * 0.7 */
    padding: 4.2px 5.6px; /* 6px 8px * 0.7 */
  }

  #element-status[data-tone="error"] {
    color: #f48771;
    background: rgba(248, 113, 113, 0.1);
    border-color: #f48771;
  }

  #element-status[data-tone="success"] {
    color: #4ec9b0;
    background: rgba(78, 201, 176, 0.1);
    border-color: #4ec9b0;
  }

  #element-status[data-tone="info"] {
    color: var(--vscode-text);
    background: var(--vscode-input-bg);
    border-color: var(--vscode-border);
  }

  /* Step Assertion Section */
  .step-assertion-section {
    margin-top: 8.4px; /* 12px * 0.7 */
    padding-top: 8.4px; /* 12px * 0.7 */
    border-top: 1px solid var(--vscode-border);
  }

  .step-add-assertion-btn {
    width: 100%;
    padding: 3px 6px; /* 1/4 í¬ê¸°ë¡œ ì¤„ì„ (ì›ë˜ 7px 11.2pxì˜ ì•½ 1/4) */
    border-radius: 2px;
    border: 1px solid var(--vscode-primary);
    background: var(--vscode-input-bg);
    color: var(--vscode-primary);
    font-size: 8px; /* ì‘ê²Œ ì¡°ì • (ì›ë˜ 9.1pxì˜ ì•½ 1/4ë³´ë‹¤ëŠ” ì•½ê°„ í¬ê²Œ) */
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    line-height: 1.3;
  }

  .step-add-assertion-btn:hover {
    background: var(--vscode-selection);
    border-color: var(--vscode-primary-hover);
  }

  .step-assertion-menu {
    display: flex;
    flex-direction: column;
    gap: 5.6px; /* 8px * 0.7 */
    margin-top: 5.6px; /* 8px * 0.7 */
    padding: 8.4px; /* 12px * 0.7 */
    background: var(--vscode-title-bar);
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-border);
  }

  .step-assertion-menu.hidden {
    display: none;
  }

  .step-assertion-menu .assertion-menu-header {
    font-size: 8.4px; /* 12px * 0.7 */
    font-weight: 600;
    color: var(--vscode-text);
    margin-bottom: 2.8px; /* 4px * 0.7 */
  }

  .step-assertion-menu .assertion-menu-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 4.2px; /* 6px * 0.7 */
  }

  .step-assertion-menu .assertion-menu-btn {
    padding: 5.6px 8.4px; /* 8px 12px * 0.7 */
    border-radius: 4.2px; /* 6px * 0.7 */
    border: 1px solid var(--vscode-input-border);
    background: var(--vscode-input-bg);
    color: var(--vscode-text);
    font-size: 8.4px; /* 12px * 0.7 */
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    flex: 1 1 auto;
    min-width: 84px; /* 120px * 0.7 */
  }

  .step-assertion-menu .assertion-menu-btn:hover {
    background: var(--vscode-hover);
    border-color: var(--vscode-primary);
  }

  .step-assertion-menu .assertion-menu-btn:active {
    background: var(--vscode-selection);
  }
</style>
</head>
<body>
  <!-- Recorder Header -->
  <div class="recorder-header">
    <div class="recorder-header-main">
      <div class="recorder-controls">
        <button id="start-record" class="recorder-btn recorder-btn-primary">
          <span class="recorder-btn-icon">â—</span>
          <span>Record</span>
        </button>
        <button id="stop-record" class="recorder-btn" disabled>
          <span class="recorder-btn-icon">â– </span>
          <span>Stop</span>
        </button>
        <button id="replay-btn" class="recorder-btn">
          <span class="recorder-btn-icon">â–¶</span>
          <span>Replay</span>
        </button>
      </div>
      <div class="recorder-header-actions">
        <button id="settings-toggle-btn" class="recorder-btn-icon-only" title="ì„¤ì •">
          <span>âš™</span>
        </button>
      </div>
    </div>
    <div id="settings-panel" class="settings-panel hidden">
      <div class="settings-content">
        <div class="settings-section">
          <h5>ê¸°ë³¸ ì„¤ì •</h5>
          <div class="settings-row">
            <label class="settings-field" for="framework-select">
              <span class="settings-label">í”„ë ˆì„ì›Œí¬</span>
              <select id="framework-select">
                <option value="playwright">Playwright</option>
                <option value="selenium">Selenium</option>
                <option value="cypress">Cypress</option>
              </select>
            </label>
            <label class="settings-field" for="language-select">
              <span class="settings-label">ì–¸ì–´</span>
              <select id="language-select">
                <option value="python">Python</option>
                <option value="python-class">Python (Class)</option>
                <option value="javascript">JavaScript</option>
                <option value="typescript">TypeScript</option>
              </select>
            </label>
          </div>
        </div>
        <div class="settings-section">
          <h5>TestArchitect ì—°ë™</h5>
          <div class="settings-row">
            <label class="settings-field" for="tc-id-input">
              <span class="settings-label">TC ID *</span>
              <input id="tc-id-input" type="number" placeholder="123" min="1" required/>
            </label>
            <label class="settings-field" for="project-id-input">
              <span class="settings-label">Project ID</span>
              <input id="project-id-input" type="number" placeholder="1" min="1" value="1"/>
            </label>
            <div class="settings-field">
              <button id="send-recording-btn" class="recorder-btn">ì „ì†¡</button>
            </div>
          </div>
        </div>
        <div class="settings-section">
          <h5>AI ì„¤ì •</h5>
          <div class="settings-row">
            <label class="settings-field" for="ai-endpoint">
              <span class="settings-label">API Endpoint</span>
              <input id="ai-endpoint" placeholder="https://api.example.com/selectors" autocomplete="off" />
            </label>
            <label class="settings-field" for="ai-api-key">
              <span class="settings-label">API í‚¤</span>
              <input id="ai-api-key" type="password" placeholder="API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" />
            </label>
            <label class="settings-field" for="ai-model">
              <span class="settings-label">ëª¨ë¸</span>
              <input id="ai-model" placeholder="ì˜ˆ: gpt-4.1-mini" autocomplete="off" />
            </label>
            <div class="settings-field">
              <button id="ai-settings-save" class="recorder-btn">ì €ì¥</button>
              <span id="ai-settings-status" class="ai-settings-status"></span>
            </div>
          </div>
        </div>
        <div class="settings-section">
          <h5>ê¸°íƒ€</h5>
          <div class="settings-row">
            <button id="element-select-btn" class="recorder-btn">ìš”ì†Œ ì„ íƒ</button>
            <div class="action-menu-wrapper">
              <button id="action-btn" class="recorder-btn">Action ì¶”ê°€ â–¼</button>
              <div id="action-menu" class="action-menu hidden">
                <div class="action-menu-category">
                  <div class="action-menu-header">ìƒí˜¸ì‘ìš©</div>
                  <button data-action-type="interaction" data-action="click">í´ë¦­</button>
                  <button data-action-type="interaction" data-action="doubleClick">ë”ë¸” í´ë¦­</button>
                  <button data-action-type="interaction" data-action="rightClick">ìš°í´ë¦­</button>
                  <button data-action-type="interaction" data-action="hover">í˜¸ë²„</button>
                  <button data-action-type="interaction" data-action="type">ì…ë ¥</button>
                  <button data-action-type="interaction" data-action="clear">ì…ë ¥ í•„ë“œ ë¹„ìš°ê¸°</button>
                  <button data-action-type="interaction" data-action="select">ë“œë¡­ë‹¤ìš´ ì„ íƒ</button>
                </div>
                <div class="action-menu-category">
                  <div class="action-menu-header">ê²€ì¦</div>
                  <button data-action-type="verify" data-action="verifyText">í…ìŠ¤íŠ¸ ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyTextContains">í…ìŠ¤íŠ¸ ë¶€ë¶„ì¼ì¹˜ ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyElementPresent">ìš”ì†Œ ì¡´ì¬ ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyElementNotPresent">ìš”ì†Œ ë¶€ì¬ ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyTitle">íƒ€ì´í‹€ ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyUrl">URL ê²€ì¦</button>
                  <button data-action-type="verify" data-action="verifyImage">ì´ë¯¸ì§€ ë¹„êµ</button>
                </div>
                <div class="action-menu-category">
                  <div class="action-menu-header">ëŒ€ê¸°</div>
                  <button data-action-type="wait" data-action="waitForElement">ìš”ì†Œ ëŒ€ê¸°</button>
                  <button data-action-type="wait" data-action="wait">ì‹œê°„ ëŒ€ê¸°</button>
                </div>
              </div>
            </div>
            <button id="overlay-toggle-btn" class="recorder-btn" aria-pressed="false">ì˜¤ë²„ë ˆì´ í‘œì‹œ</button>
            <button id="reset-btn" class="recorder-btn">ì´ˆê¸°í™”</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="main">
    <!-- Steps Panel -->
    <div id="steps-panel" class="steps-panel">
      <div class="steps-header">
        <h4>Steps</h4>
        <div class="steps-header-actions">
          <button id="delete-event-btn" class="step-action-btn" disabled title="ì„ íƒëœ ë‹¨ê³„ ì‚­ì œ">ğŸ—‘</button>
        </div>
      </div>
      <div id="timeline" class="steps-list"></div>
      <div id="steps-empty" class="steps-empty hidden">
        <p>ë…¹í™”ë¥¼ ì‹œì‘í•˜ë©´ ë‹¨ê³„ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
      </div>
      <!-- Global Assertion Section -->
      <div id="global-assertion-section" class="global-assertion-section">
        <div style="display: flex; gap: 8px; margin-bottom: 8px;">
          <button id="global-add-assertion-btn" class="global-add-assertion-btn" style="flex: 1;">
            <span>+</span>
            <span>Add assertion</span>
          </button>
          <button id="global-add-wait-btn" class="global-add-assertion-btn" style="flex: 1;">
            <span>+</span>
            <span>Add wait</span>
          </button>
        </div>
        <div id="global-assertion-menu" class="global-assertion-menu hidden">
          <div class="assertion-menu-header">Assertion íƒ€ì… ì„ íƒ</div>
          <div class="assertion-menu-buttons">
            <button class="assertion-menu-btn" data-assertion="verifyText">í…ìŠ¤íŠ¸ ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyTextContains">í…ìŠ¤íŠ¸ ë¶€ë¶„ì¼ì¹˜ ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyElementPresent">ìš”ì†Œ ì¡´ì¬ ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyElementNotPresent">ìš”ì†Œ ë¶€ì¬ ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyTitle">íƒ€ì´í‹€ ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyUrl">URL ê²€ì¦</button>
            <button class="assertion-menu-btn" data-assertion="verifyImage">ì´ë¯¸ì§€ ë¹„êµ</button>
          </div>
        </div>
        <div id="global-wait-menu" class="global-assertion-menu hidden">
          <div class="assertion-menu-header">Wait íƒ€ì… ì„ íƒ</div>
          <div class="assertion-menu-buttons">
            <button class="assertion-menu-btn" data-wait="wait">ì‹œê°„ ëŒ€ê¸°</button>
            <button class="assertion-menu-btn" data-wait="waitForElement">ìš”ì†Œ ëŒ€ê¸°</button>
          </div>
        </div>
        <div id="wait-input-panel" class="global-wait-input-panel hidden" style="margin-top: 8px; padding: 12px; background: var(--vscode-sidebar); border-radius: 5.6px;">
          <div style="font-weight: 600; margin-bottom: 8px; font-size: 13px;">ëŒ€ê¸° ì‹œê°„ (ë°€ë¦¬ì´ˆ)</div>
          <div style="display: flex; gap: 8px;">
            <input id="wait-time-input" type="number" placeholder="2000" min="0" style="flex: 1; padding: 6px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 3px;" />
            <button id="wait-time-apply" style="padding: 6px 12px; background: var(--vscode-button-background); color: var(--vscode-button-foreground); border: none; border-radius: 3px; cursor: pointer;">ì ìš©</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Step Details Panel -->
    <div id="step-details-panel" class="step-details-panel hidden">
      <div class="step-details-header">
        <h4>Step Details</h4>
        <button id="step-details-close" class="step-details-close">âœ•</button>
      </div>
      <div id="step-details-content">
        <div id="iframe-banner" class="hidden">âš ï¸ ì´ ìš”ì†ŒëŠ” iframe ë‚´ë¶€ì— ìˆìŠµë‹ˆë‹¤. ìë™ ì „í™˜ í•„ìš”</div>
        <div id="selector-panel">
          <h4>ì¶”ì²œ ì…€ë ‰í„°</h4>
          <div id="selector-list"></div>
        </div>
        <div id="element-panel" class="hidden">
          <div class="element-header">
            <h4>ìš”ì†Œ ì„ íƒ íë¦„</h4>
            <button id="element-cancel-btn">ì·¨ì†Œ</button>
          </div>
          <div id="element-status"></div>
          <div id="element-path" class="element-section hidden">
            <div class="element-title">ì„ íƒ ê²½ë¡œ</div>
            <div id="element-path-items"></div>
          </div>
          <div id="element-candidates" class="element-section"></div>
          <div id="element-actions" class="element-section hidden">
            <div class="element-title">ë™ì‘ ì„ íƒ</div>
            <div class="element-action-buttons">
              <button data-action="click">í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€</button>
              <button data-action="text">í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</button>
              <button data-action="value">ê°’(value) ê°€ì ¸ì˜¤ê¸°</button>
              <button data-action="attribute">ì†ì„± ê°€ì ¸ì˜¤ê¸°</button>
              <button data-action="child">í•˜ìœ„ ë…¸ë“œ ì„ íƒ</button>
              <button data-action="parent">ìƒìœ„ ë…¸ë“œë¡œ ì´ë™</button>
              <button data-action="commit">ì„ íƒ ì™„ë£Œ</button>
              <button data-action="finish">ì„ íƒ ì·¨ì†Œ</button>
            </div>
          </div>
          <div id="interaction-actions" class="element-section hidden">
            <div class="element-title">ìƒí˜¸ì‘ìš© ì•¡ì…˜</div>
            <div class="element-action-buttons">
              <button data-interaction="click">í´ë¦­</button>
              <button data-interaction="doubleClick">ë”ë¸” í´ë¦­</button>
              <button data-interaction="rightClick">ìš°í´ë¦­</button>
              <button data-interaction="hover">í˜¸ë²„</button>
              <button data-interaction="type">ì…ë ¥</button>
              <button data-interaction="clear">ì…ë ¥ í•„ë“œ ë¹„ìš°ê¸°</button>
              <button data-interaction="select">ë“œë¡­ë‹¤ìš´ ì„ íƒ</button>
            </div>
          </div>
          <div id="verify-actions" class="element-section hidden">
            <div class="element-title">ê²€ì¦ ì•¡ì…˜</div>
            <div class="element-action-buttons">
              <button data-verify="verifyText">í…ìŠ¤íŠ¸ ê²€ì¦</button>
              <button data-verify="verifyTextContains">í…ìŠ¤íŠ¸ ë¶€ë¶„ì¼ì¹˜ ê²€ì¦</button>
              <button data-verify="verifyElementPresent">ìš”ì†Œ ì¡´ì¬ ê²€ì¦</button>
              <button data-verify="verifyElementNotPresent">ìš”ì†Œ ë¶€ì¬ ê²€ì¦</button>
              <button data-verify="verifyTitle">íƒ€ì´í‹€ ê²€ì¦</button>
              <button data-verify="verifyUrl">URL ê²€ì¦</button>
              <button data-verify="verifyImage">ì´ë¯¸ì§€ ë¹„êµ</button>
            </div>
          </div>
          <div id="wait-actions" class="element-section hidden">
            <div class="element-title">ëŒ€ê¸° ì•¡ì…˜</div>
            <div class="element-action-buttons">
              <button data-wait="waitForElement">ìš”ì†Œ ëŒ€ê¸°</button>
              <button data-wait="wait">ì‹œê°„ ëŒ€ê¸°</button>
            </div>
          </div>
          <div id="element-attribute-panel" class="element-section hidden">
            <div class="element-title">ì†ì„± ì¶”ì¶œ</div>
            <div class="element-attr-row">
              <input id="element-attr-name" placeholder="ì†ì„±ëª… (ì˜ˆ: href)" />
              <button id="element-attr-apply">ì ìš©</button>
            </div>
          </div>
          <div id="element-code-preview" class="element-section hidden">
            <div class="element-title">í˜„ì¬ ì½”ë“œ ë¯¸ë¦¬ë³´ê¸°</div>
            <pre><code id="element-code"></code></pre>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Code Area -->
    <div id="code-area" class="code-area">
      <div class="code-area-header">
        <h4>Code Editor</h4>
        <div class="code-area-header-actions">
          <div class="code-review-controls">
            <span id="ai-review-btn-wrapper" class="ai-review-btn-wrapper">
              <button id="ai-review-btn" class="recorder-btn">AI ê²€í† </button>
            </span>
            <span id="ai-review-help" class="ai-review-help" role="button" aria-label="AI ê²€í†  ê¸°ëŠ¥ ì•ˆë‚´" tabindex="0" aria-haspopup="true">!</span>
            <span id="ai-review-status" class="code-review-status"></span>
            <button id="sync-to-tc-btn" class="recorder-btn" title="í˜„ì¬ ì´ë²¤íŠ¸ë¥¼ TC stepsë¡œ ë™ê¸°í™”">TCì— ë™ê¸°í™”</button>
          </div>
          <button id="code-area-toggle" class="code-area-toggle" title="ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° ì ‘ê¸°/í¼ì¹˜ê¸°">â–¼</button>
        </div>
      </div>
      <div id="code-area-content" class="code-area-content">
        <div id="code-editor">
          <textarea id="code-output" spellcheck="false" wrap="off"></textarea>
        </div>
        <div id="code-review-summary" class="code-review-summary hidden"></div>
        <div id="code-review-diff" class="code-review-diff hidden"></div>
      </div>
    </div>
    
    <!-- Replay Log -->
    <div id="replay-log" class="replay-log">
      <div class="replay-log-header">
        <h4>Replay Log</h4>
        <button id="replay-log-toggle" class="replay-log-toggle">â–¼</button>
      </div>
      <div id="replay-log-content" class="replay-log-content">
        <div id="log-entries"></div>
      </div>
    </div>
  </div>

<script src="lib/codemirror/lib/codemirror.js"></script>
<script src="lib/codemirror/mode/javascript/javascript.js"></script>
<script src="lib/codemirror/mode/python/python.js"></script>
<script type="module" src="recorder.js"></script>
</body>
</html>
